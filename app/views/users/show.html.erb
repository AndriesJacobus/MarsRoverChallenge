
<br/>

<div class="row">
  <div class="col s12 m6">
    <div class="card blue white-text z-depth-5 hoverable">
      <div class="card-content">
        <span class="card-title">User Information:</span>
        <hr style = "display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0;"/>

        <p class = "cardSubTitle">Basic Information:</p>
        <p>
          <strong>Email:</strong><br/>
          <%= @user.email %>
        </p>
        <br/>

        <p>
          <strong>Name:</strong><br/>
          <%= @user.name %>
        </p>
        <br/>

        <p>
          <strong>Surname:</strong><br/>
          <%= @user.surname %>
        </p>
        <br/>

        <p>
          <strong>User Type:</strong><br/>
          <%= @user.usertype %>
        </p>
        <br/>

      </div>
    </div>
  </div>

  <div class="col s6 m6">
    <div class="card blue white-text z-depth-5 hoverable">
      <div class="card-content">
        <span class="card-title">Associated Information:</span>
        <hr style = "display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0;"/>

        <p class = "cardSubTitle">Client Details:</p>

        <p>
          <strong>Client Name:</strong><br/>
          <% if @user.client_detail && @user.client_detail && @user.client_detail.name.length > 0 %>
            <%= @user.client_detail.name %>
          <% else %>
            N/A
          <% end %>
        </p>

        <br/>

        <p>
          <strong>Company name:</strong><br/>
          <% if @user.client_detail && @user.client_detail.company_name && @user.client_detail.company_name.length > 0 %>
            <%= @user.client_detail.company_name %>
          <% else %>
            N/A
          <% end %>
        </p>

        <br/>

        <p>
          <strong>Business address:</strong><br/>
          <% if @user.client_detail && @user.client_detail.business_address && @user.client_detail.business_address.length > 0 %>
            <%= @user.client_detail.business_address %>
          <% else %>
            N/A
          <% end %>
        </p>

        <br/>

        <p class = "cardSubTitle">Site Information:</p>

        <p>
          <strong>Site Name:</strong><br/>
          <% if !@user.client.nil? %>
            <%= @user.client.Name %>
          <% else %>
            <i>N/A</i>
          <% end %>
        </p>

        <br/>
        
        <p>
          <strong>Site DeviceType ID:</strong><br/>
          <% if !@user.client.nil? %>
            <%= @user.client.SigfoxDeviceTypeID %>
          <% else %>
            <i>N/A</i>
          <% end %>
        </p>

        <br/>

      </div>
    </div>
  </div>
</div>

<% if current_user.usertype == "Sysadmin" || current_user.usertype == "Client Admin" %>

  <%# Set the client for the current user %>
  <% if @user.client_detail.nil? %>
    <p style = "font-size: 28px;">Link a Client for <%= @user.name %>:</p>
  <% else %>
    <p style = "font-size: 28px;">Change the Client for <%= @user.name %>:</p>
  <% end %>

  <hr style = "display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0;"/>

  <%= render partial: 'client_details/select_client_detail', locals: {client_details: @client_details, user: @user } %>

  <%# Allow users to change Site any time %>
  <% if @user.client.nil? %>
    <p style = "font-size: 28px;">Link a Site for <%= @user.name %>:</p>
  <% else %>
    <p style = "font-size: 28px;">Change the Site for <%= @user.name %>:</p>
  <% end %>
  <hr style = "display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0;"/>

  <%= render partial: 'clients/select_client', locals: {clients: @clients, user: @user} %>

  <br/>

<% end %>

<%# Link to edit %>
<%= link_to 'Edit', edit_user_path(@user), class: "waves-effect waves-light blue lighten-1 btn-small white-text" %> |

<% if !current_user %>
  <%= link_to "Login", login_path, class: "waves-effect waves-light blue lighten-1 btn-small white-text" %>
  |
<% end %>

<% if current_user && (current_user.usertype == "Sysadmin" || current_user.usertype == "Client Admin") %>
  <%= link_to 'Back to Users', users_path, class: "waves-effect waves-light blue lighten-1 btn-small white-text"  %>
  |
<% end %>

<%= link_to 'Back to Dashboard', root_path, class: "waves-effect waves-light blue lighten-1 btn-small white-text"  %>