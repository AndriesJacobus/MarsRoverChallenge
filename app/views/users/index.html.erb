
<h3><u>Users</u></h3>

<div class = "z-depth-5 hoverable scroller">
  <table>
    <thead>
      <tr>
        <th style = "white-space: nowrap; padding-right: 35px;">Email</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Name</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Surname</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Type</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Client Name</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Site Name</th>
        <th style = "white-space: nowrap; padding-right: 35px;">Site DeviceType ID</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td style = "white-space: nowrap; padding-right: 35px;"><%= user.email %></td>
          <td style = "white-space: nowrap; padding-right: 35px;"><%= user.name %></td>
          <td style = "white-space: nowrap; padding-right: 35px;"><%= user.surname %></td>
          <td style = "white-space: nowrap; padding-right: 35px;"><%= user.usertype %></td>

          <% if user.client_detail && user.client_detail && user.client_detail.name.length > 0 %>
            <td style = "white-space: nowrap; padding-right: 35px;"><%= user.client_detail.name %></td>
          <% else %>
            <td style = "white-space: nowrap; padding-right: 35px;"><i>N/A</i></td>
          <% end %>

          <% if !user.client.nil? %>
            <td style = "padding-right: 35px;"><%= user.client.Name %></td>
          <% else %>
            <td style = "padding-right: 35px;"><i>N/A</i></td>
          <% end %>

          <% if !user.client.nil? %>
            <td style = "padding-right: 35px;"><%= user.client.SigfoxDeviceTypeID %></td>
          <% else %>
            <td style = "padding-right: 35px;"><i>N/A</i></td>
          <% end %>

          <td><%= link_to 'Show', user, class: "waves-effect waves-light blue lighten-1 btn-small white-text" %></td>
          <td><%= link_to 'Edit', edit_user_path(user), class: "waves-effect waves-light blue lighten-1 btn-small white-text" %></td>
          
          <% if user.usertype != "Sysadmin" || current_user.usertype ==  "Sysadmin" %>
            <td><%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, class: "waves-effect waves-light blue lighten-1 btn-small white-text" %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<%= link_to 'New User', new_user_path, class: "waves-effect waves-light blue lighten-1 btn-small white-text" %> |
<%= link_to 'Back to Dashboard', root_path, class: "waves-effect waves-light blue lighten-1 btn-small white-text" %>
